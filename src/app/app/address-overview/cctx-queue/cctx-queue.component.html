<div *ngIf="address$ | async" class="card-body">
    <div class=" text-xs" *ngIf="walletActivityDisplay$ | async as activity; else loading">
        <div class="uppercase font-medium text-slate-500 mb-4">
            Transactions
        </div>
        <div class="py-1 mb-2 border-b" *ngFor="let response of activity.ccip_api_responses; let i = index">
            <div class="w-full grid gap-x-4 grid-cols-10" *ngIf="response.data.allCcipTransactionsFlats.nodes.at(0) as node">
                
                <div *ngIf="formatCCTxTime(node.blockTimestamp) as datetime"
                     class="flex flex-col justify-center col-span-1">
                    <div class="font-bold uppercase text-slate-600">
                        {{datetime.month}}
                    </div>
                    <div>
                        {{datetime.day}}
                    </div>
                </div>

                <div *ngIf="formatCCTxTime(node.blockTimestamp) as datetime" 
                    class="col-span-3 flex flex-row items-center">
                    <div>
                        {{datetime.time.hourWMinute}} 
                    </div>
                </div>

                <div class="col-span-1 gap-x-4 flex flex-row text-xs uppercase font-semibold
                 items-center justify-center rounded-md"> 
                    <div *ngIf="getChainInfo(node.sourceChainId) as chainInfo" class="flex flex-row gap-x-2 font-semibold items-center justify-start">
                        <img class="h-6" src="../../../assets/networks/{{chainInfo.logoUri}}" alt="" srcset=""> 
                    </div> 
                </div>

                <div class="flex flex-row items-center justify-center text-slate-700">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z" clip-rule="evenodd" />
                      </svg>
                      
                </div>

                <div class="col-span-1 gap-x-4 flex flex-row text-xs uppercase font-semibold
                 items-center justify-center rounded-md"> 
                    <div *ngIf="getChainInfo(node.destChainId) as chainInfo" class="flex flex-row gap-x-2 font-semibold items-center justify-start">
                        <img class="h-6" src="../../../assets/networks/{{chainInfo.logoUri}}" alt="" srcset=""> 
                    </div> 
                </div>

                
                      
                
                <a target="_blank"
                 href="https://ccip.chain.link/tx/{{node.transactionHash}}" 
                 class="col-span-3 py-2 uppercase font-medium hover:text-slate-900 text-slate-600 rounded-md flex flex-row justify-end items-center underline">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                    <path fill-rule="evenodd" d="M15.75 2.25H21a.75.75 0 01.75.75v5.25a.75.75 0 01-1.5 0V4.81L8.03 17.03a.75.75 0 01-1.06-1.06L19.19 3.75h-3.44a.75.75 0 010-1.5zm-10.5 4.5a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h10.5a1.5 1.5 0 001.5-1.5V10.5a.75.75 0 011.5 0v8.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V8.25a3 3 0 013-3h8.25a.75.75 0 010 1.5H5.25z" clip-rule="evenodd" />
                  </svg>
                  
                </a>
            </div>
        </div>
        <div (click)="toggleSeeAllVisible()" class="w-full text-xs font-semibold underline mt-4 cursor-pointer
         flex flex-row justify-center items-center uppercase">
            See all
        </div>
    </div>
</div>

<ng-template #loading>
    <app-spinner></app-spinner>
</ng-template>

<div *ngIf="isSeeAllVisible$ | async" class="fixed top-0 left-0 bg-[rgba(255,255,255,0.4)]
    flex flex-row items-center justify-center z-50 backdrop-blur-[2px] w-screen h-screen">
    

    <div class="max-w-lg w-full bg-white border text-slate-700 rounded-md p-8 text-sm">
        <div *ngIf="walletActivity$ | async as allActivity; else loading">
        
            <div class="mb-5 uppercase font-semibold flex flex-row justify-between w-full">
                <div class="text-base">
                    Cross-Chain Transactions
                </div>
                <div class="cursor-pointer hover:text-rose-600" (click)="toggleSeeAllVisible()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z" clip-rule="evenodd" />
                      </svg>                      
                </div>
            </div>
    
            <div class="py-1 mb-2 border-b border-slate-100" *ngFor="let response of allActivity.ccip_api_responses">
                <div class="w-full grid gap-x-4 grid-cols-5" *ngIf="response.data.allCcipTransactionsFlats.nodes.at(0) as node">
                    
                    <div *ngIf="formatCCTxTime(node.blockTimestamp) as datetime"
                         class="flex flex-col justify-center">
                        <div class="font-bold uppercase text-slate-600">
                            {{datetime.month}}
                        </div>
                        <div>
                            {{datetime.day}}
                        </div>
                    </div>
                    
                    <div *ngIf="getChainInfo(node.sourceChainId) as chainInfo" class="flex flex-row items-center gap-x-2 font-semibold">
                        <img class="h-5" src="../../../assets/networks/{{chainInfo.logoUri}}" alt="" srcset=""> 
                        <div>{{chainInfo.shortName}}</div>
                    </div>
                    
                    <div class="flex flex-row items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12.75 15l3-3m0 0l-3-3m3 3h-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>  
                          
                    </div>
    
                    <div *ngIf="getChainInfo(node.destChainId) as chainInfo" class="flex flex-row gap-x-2 font-semibold items-center justify-start">
                        <img class="h-5" src="../../../assets/networks/{{chainInfo.logoUri}}" alt="" srcset=""> 
                        <div>{{chainInfo.shortName}}</div>
                    </div>       
                    
                    <a target="_blank"
                     href="https://ccip.chain.link/tx/{{node.transactionHash}}" 
                     class="col-span-1 py-2 uppercase font-medium hover:text-slate-900 text-slate-600 rounded-md flex flex-row justify-end items-center underline">
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path fill-rule="evenodd" d="M15.75 2.25H21a.75.75 0 01.75.75v5.25a.75.75 0 01-1.5 0V4.81L8.03 17.03a.75.75 0 01-1.06-1.06L19.19 3.75h-3.44a.75.75 0 010-1.5zm-10.5 4.5a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h10.5a1.5 1.5 0 001.5-1.5V10.5a.75.75 0 011.5 0v8.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V8.25a3 3 0 013-3h8.25a.75.75 0 010 1.5H5.25z" clip-rule="evenodd" />
                      </svg>
                      
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    
</div>